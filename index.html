export function renderAccordion() {
  const txByDate = groupByDate(ops);
  let runningBalance = startBalance || 0;          // saldo acumulado

  accordion.innerHTML = '';
  for (let d = 1; d <= 31; d++) {
    const iso = `${year}-${month.toString().padStart(2, '0')}-${d.toString().padStart(2, '0')}`;
    const dayTx = txByDate[iso] || [];
    if (dayTx.length === 0) continue;

    const dayTotal = dayTx.reduce((s,t)=>s + t.val,0);
    runningBalance += dayTotal;  // saldo acumulado real
    const dow = new Date(iso).toLocaleDateString('pt-BR',{weekday:'long'});
    const dDet = document.createElement('details');
    dDet.className = 'day';
    const dSum = document.createElement('summary');
    dSum.textContent = `${String(d).padStart(2,'0')} - ${dow.charAt(0).toUpperCase()+dow.slice(1)}  ${currency(runningBalance)}`;

    dDet.appendChild(dSum);

    const ul = document.createElement('ul');
    dayTx.forEach(tx => {
      const li = document.createElement('li');
      li.textContent = `${tx.desc} ${currency(tx.val)}`;
      ul.appendChild(li);
    });

    dDet.appendChild(ul);
    accordion.appendChild(dDet);
  }
}